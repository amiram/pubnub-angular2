!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1),n(2)},function(e,t){"use strict";"function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(t!==Object(t)&&null!==t)throw new TypeError("Argument must be an object or null");if(null===t)throw Error("null [[Prototype]] not supported");e.prototype=t;var n=new e;return e.prototype=null,n}}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(3),s=r(a),i=n(4),u=r(i);!function(){window.PubNubAngular=ng.core.Class({constructor:function(){if("undefined"==typeof PubNub||null===PubNub)throw new Error("PubNub is not in global scope. Ensure that pubnub.js v4 library is included before the angular adapter");this.wrappers={}},init:function(e){var t=this.getInstance(s.default.default_instance_name);return t.init(e),t},getInstance:function(e){var t=this,n=this.wrappers[e];return n&&n instanceof u.default?n:"string"==typeof e&&e.length>0?(this.wrappers[e]=new u.default(e,this),s.default.attributes_to_delegate.forEach(function(n){t.wrappers[e].wrapAttribute(n),t[n]||Object.defineProperty(t,n,{get:function(){return this.getInstance(s.default.default_instance_name)[n]}})}),s.default.methods_to_delegate.forEach(function(n){t.wrappers[e].wrapMethod(n),t[n]||(t[n]=function(e){return this.getInstance(s.default.default_instance_name)[n](e)})}),this.wrappers[e]):n},subscribe:function(e){this.getInstance(s.default.default_instance_name).subscribe(e)},unsubscribe:function(e){this.getInstance(s.default.default_instance_name).unsubscribe(e)},getMessage:function(e,t){return this.getInstance(s.default.default_instance_name).getMessage(e,t)},getPresence:function(e,t){this.getInstance(s.default.default_instance_name).getPresence(e,t)},getStatus:function(e,t){this.getInstance(s.default.default_instance_name).getStatus(e,t)},getError:function(e){this.getInstance(s.default.default_instance_name).getError(e)}})}()},function(e,t){e.exports={pubnub_prefix:"pubnub",default_instance_name:"default",attributes_to_delegate:["channelGroups","push"],methods_to_delegate:["addListener","removeListener","removeAllListeners","hereNow","whereNow","getState","setState","grant","audit","publish","fire","history","time","reconnect","stop","unsubscribeAll","getSubscribedChannels","getSubscribedChannelGroups","encrypt","decrypt","getAuthKey","setAuthKey","setCipherKey","getUUID","setUUID","getFilterExpression","setFilterExpression"],common_callbacks_to_wrap:["callback","error"],subscribe_listener_events_to_broadcast:["message","presence","status"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=r(i),c=n(6),o=r(c),l=n(7),f=r(l);e.exports=function(){function e(t){a(this,e),this.label=t,this.pubnubInstance=null,this.broadcastOn=new o.default,this.outputOn=new f.default,this.mockingInstance=new u.default(this.broadcastOn)}return s(e,[{key:"init",value:function(e){this.pubnubInstance=new PubNub(e),this.mockingInstance.initializeListener(this)}},{key:"getLabel",value:function(){return this.label}},{key:"subscribe",value:function(e){this.getOriginalInstance().subscribe(e),this.mockingInstance.enableEventsBroadcast(e)}},{key:"unsubscribe",value:function(e){this.getOriginalInstance().unsubscribe(e),this.mockingInstance.disableEventsBroadcast(e)}},{key:"getMessage",value:function(e,t){var n=this;return this.outputOn.subscribe(e),t&&this.broadcastOn.message(e,function(r){n.outputOn.push(e,r),t(r)}),this.outputOn.get(e)}},{key:"getPresence",value:function(e,t){this.broadcastOn&&this.broadcastOn.presence(e,t)}},{key:"getStatus",value:function(e,t){this.broadcastOn&&this.broadcastOn.status(e,t)}},{key:"getError",value:function(e){this.broadcastOn&&this.broadcastOn.error(e)}},{key:"getOriginalInstance",value:function(){if(this.pubnubInstance)return this.pubnubInstance;throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")}},{key:"wrapAttribute",value:function(e){Object.defineProperty(this,e,{get:function(){return this.getOriginalInstance()[e]}})}},{key:"wrapMethod",value:function(e){this[e]=function(t){return this.getOriginalInstance()[e](t)}}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u=r(i);e.exports=function(){function e(t){a(this,e),this.listener=null,this.broadcaster=t,this.broadcastChannels={}}return s(e,[{key:"initializeListener",value:function(e){var t=this;null===this.listener&&!function(){var n=t;n.listener={},u.default.subscribe_listener_events_to_broadcast.forEach(function(e){n.listener[e]=function(t){t.subscription&&n.broadcastChannels[t.subscription]&&n.broadcastChannels[t.subscription].includes(e)&&(n.broadcaster.emit(e,t.subscription,t),t.channel&&n.broadcaster.emit(e,t.channel,t)),t.channel&&n.broadcastChannels[t.channel]&&n.broadcastChannels[t.channel].includes(e)&&n.broadcaster.emit(e,t.channel,t),"status"===e&&(t.error?n.broadcaster.emitError(t):(t.affectedChannels.forEach(function(r){n.broadcastChannels[r]&&n.broadcastChannels[r].includes(e)&&n.broadcaster.emit(e,r,t)}),t.affectedChannelGroups.forEach(function(r){n.broadcastChannels[r]&&n.broadcastChannels[r].includes(e)&&n.broadcaster.emit(e,r,t)})))}}),e.getOriginalInstance().addListener(t.listener)}()}},{key:"addEventsBroadcast",value:function(e,t){var n=this;e.forEach(function(e){"boolean"==typeof t?n.broadcastChannels[e]=u.default.subscribe_listener_events_to_broadcast:Array.isArray(t)&&(n.broadcastChannels[e]=[],t.forEach(function(t){u.default.subscribe_listener_events_to_broadcast.includes(t)&&n.broadcastChannels[e].push(t)}))})}},{key:"removeEventBroadcast",value:function(e){var t=this;e.forEach(function(e){t.broadcastChannels[e]&&delete t.broadcastChannels[e]})}},{key:"enableEventsBroadcast",value:function(e){e.channels&&this.addEventsBroadcast(e.channels,e.triggerEvents),e.channelGroups&&this.addEventsBroadcast(e.channelGroups,e.triggerEvents)}},{key:"disableEventsBroadcast",value:function(e){e.channels&&this.removeEventBroadcast(e.channels),e.channelGroups&&this.removeEventBroadcast(e.channelGroups)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n){Array.isArray(t)?t.forEach(function(t){e[t]=n}):e[t]=n}function i(e,t){Array.isArray(t)?t.forEach(function(t){e[t]&&delete e[t]}):e[t]&&delete e[t]}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),o=r(c);e.exports=function(){function e(){var t=this;a(this,e),o.default.subscribe_listener_events_to_broadcast.forEach(function(e){var n="_".concat(e);t[n]={},t[e]=function(e,t){s(this[n],e,t)}})}return u(e,[{key:"emit",value:function(e,t,n){var r="_".concat(e);this[r]&&this[r][t]&&this[r][t].call(null,n)}},{key:"error",value:function(e){this._error=e}},{key:"emitError",value:function(e){this._error&&this._error.call(null,e)}},{key:"unsubscribe",value:function(e){var t=this;o.default.subscribe_listener_events_to_broadcast.forEach(function(n){var r="_".concat(n);i(t[r],e)})}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.exports=function(){function e(){n(this,e),this.channels={},this.multiChannels={}}return r(e,[{key:"push",value:function(e,t){var n=this;Array.isArray(e)?e.forEach(function(e){n.channels[e]&&n.channels[e].push(t)}):this.channels[e]&&this.channels[e].push(t);var r=!0,a=!1,s=void 0;try{for(var i,u=Object.keys(this.multiChannels)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value;if(c.includes(e)){this.multiChannels[c].push(t);break}}}catch(e){a=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}}},{key:"get",value:function(e){return Array.isArray(e)?this.multiChannels[e]:this.channels[e]}},{key:"subscribe",value:function(e){Array.isArray(e)?this.multiChannels[e]||(this.multiChannels[e]=[]):this.channels[e]||(this.channels[e]=[])}},{key:"unsubscribe",value:function(e){this.channels[e]&&delete this.channels[e]}}]),e}()}]);