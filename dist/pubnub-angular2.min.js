!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1),n(2)},function(t,e){"use strict";"function"!=typeof Object.create&&(Object.create=function(){var t=function(){};return function(e){if(arguments.length>1)throw new Error("Second argument not supported");if(e!==Object(e)&&null!==e)throw new TypeError("Argument must be an object or null");if(null===e)throw Error("null [[Prototype]] not supported");t.prototype=e;var n=new t;return t.prototype=null,n}}())},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=n(3),s=a(r),i=n(4),u=a(i);!function(){window.PubNubAngular=ng.core.Class({constructor:function(){if("undefined"==typeof PubNub||null===PubNub)throw new Error("PubNub is not in global scope. Ensure that pubnub.js v4 library is included before the angular adapter");this.wrappers={}},init:function(t){var e=this.getInstance(s.default.default_instance_name);return e.init(t),e},getInstance:function(t){var e=this,n=this.wrappers[t];return n&&n instanceof u.default?n:"string"==typeof t&&t.length>0?(this.wrappers[t]=new u.default(t,this),s.default.attributes_to_delegate.forEach(function(n){e.wrappers[t].wrapAttribute(n),e[n]||Object.defineProperty(e,n,{get:function(){return this.getInstance(s.default.default_instance_name)[n]}})}),s.default.methods_to_delegate.forEach(function(n){e.wrappers[t].wrapMethod(n),e[n]||(e[n]=function(t){return this.getInstance(s.default.default_instance_name)[n](t)})}),this.wrappers[t]):n},subscribe:function(t){this.getInstance(s.default.default_instance_name).subscribe(t)},unsubscribe:function(t){this.getInstance(s.default.default_instance_name).unsubscribe(t)},getMessage:function(t,e){return this.getInstance(s.default.default_instance_name).getMessage(t,e)},getPresence:function(t,e){this.getInstance(s.default.default_instance_name).getPresence(t,e)},getStatus:function(t,e){this.getInstance(s.default.default_instance_name).getStatus(t,e)},getError:function(t){this.getInstance(s.default.default_instance_name).getError(t)},clean:function(t){this.getInstance(s.default.default_instance_name).clean(t)}})}()},function(t,e){t.exports={pubnub_prefix:"pubnub",default_instance_name:"default",attributes_to_delegate:["channelGroups","push"],methods_to_delegate:["addListener","removeListener","removeAllListeners","hereNow","whereNow","getState","setState","grant","audit","publish","fire","history","time","reconnect","stop","unsubscribeAll","getSubscribedChannels","getSubscribedChannelGroups","encrypt","decrypt","getAuthKey","setAuthKey","setCipherKey","getUUID","setUUID","getFilterExpression","setFilterExpression"],common_callbacks_to_wrap:["callback","error"],subscribe_listener_events_to_broadcast:["message","presence","status"],history_sort_attribute:"timetoken"}},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(5),u=a(i),o=n(6),c=a(o),l=n(7),f=a(l),h=n(8),d=a(h);t.exports=function(){function t(e){r(this,t),this.label=e,this.pubnubInstance=null,this.broadcastOn=new c.default,this.outputOn=new f.default,this.mockingInstance=new u.default(this.broadcastOn),this.autoload=new d.default}return s(t,[{key:"init",value:function(t){this.pubnubInstance=new PubNub(t),this.mockingInstance.initializeListener(this),this.autoload.initialize(this)}},{key:"getLabel",value:function(){return this.label}},{key:"subscribe",value:function(t){this.getOriginalInstance().subscribe(t),this.mockingInstance.enableEventsBroadcast(t),this.autoload.enableLoad(t)}},{key:"unsubscribe",value:function(t){this.getOriginalInstance().unsubscribe(t),this.mockingInstance.disableEventsBroadcast(t),this.autoload.disableLoad(t),this.outputOn.unsubscribe(t)}},{key:"getMessage",value:function(t,e){var n=this;return this.outputOn.subscribe(t),this.autoload.getHistory(t,e),e&&this.broadcastOn.message(t,function(a){n.outputOn.push(t,a),e(a)}),this.outputOn.get(t)}},{key:"getPresence",value:function(t,e){this.broadcastOn&&this.broadcastOn.presence(t,e)}},{key:"getStatus",value:function(t,e){this.broadcastOn&&this.broadcastOn.status(t,e)}},{key:"getError",value:function(t){this.broadcastOn&&this.broadcastOn.error(t)}},{key:"clean",value:function(t){this.outputOn.clean(t)}},{key:"getOriginalInstance",value:function(){if(this.pubnubInstance)return this.pubnubInstance;throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")}},{key:"wrapAttribute",value:function(t){Object.defineProperty(this,t,{get:function(){return this.getOriginalInstance()[t]}})}},{key:"wrapMethod",value:function(t){this[t]=function(e){return this.getOriginalInstance()[t](e)}}}]),t}()},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(3),u=a(i);t.exports=function(){function t(e){r(this,t),this.listener=null,this.broadcaster=e,this.broadcastChannels={}}return s(t,[{key:"initializeListener",value:function(t){var e=this;null===this.listener&&!function(){var n=e;n.listener={},u.default.subscribe_listener_events_to_broadcast.forEach(function(t){n.listener[t]=function(e){e.subscription&&n.broadcastChannels[e.subscription]&&n.broadcastChannels[e.subscription].includes(t)&&(n.broadcaster.emit(t,e.subscription,e),e.channel&&n.broadcaster.emit(t,e.channel,e)),e.channel&&n.broadcastChannels[e.channel]&&n.broadcastChannels[e.channel].includes(t)&&n.broadcaster.emit(t,e.channel,e),"status"===t&&(e.error?n.broadcaster.emitError(e):(e.affectedChannels.forEach(function(a){n.broadcastChannels[a]&&n.broadcastChannels[a].includes(t)&&n.broadcaster.emit(t,a,e)}),e.affectedChannelGroups.forEach(function(a){n.broadcastChannels[a]&&n.broadcastChannels[a].includes(t)&&n.broadcaster.emit(t,a,e)})))}}),t.getOriginalInstance().addListener(e.listener)}()}},{key:"addEventsBroadcast",value:function(t,e){var n=this;t.forEach(function(t){"boolean"==typeof e?n.broadcastChannels[t]=u.default.subscribe_listener_events_to_broadcast:Array.isArray(e)&&(n.broadcastChannels[t]=[],e.forEach(function(e){u.default.subscribe_listener_events_to_broadcast.includes(e)&&n.broadcastChannels[t].push(e)}))})}},{key:"removeEventBroadcast",value:function(t){var e=this;t.forEach(function(t){e.broadcastChannels[t]&&delete e.broadcastChannels[t]})}},{key:"enableEventsBroadcast",value:function(t){t.channels&&this.addEventsBroadcast(t.channels,t.triggerEvents),t.channelGroups&&this.addEventsBroadcast(t.channelGroups,t.triggerEvents)}},{key:"disableEventsBroadcast",value:function(t){t.channels&&this.removeEventBroadcast(t.channels),t.channelGroups&&this.removeEventBroadcast(t.channelGroups)}}]),t}()},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){Array.isArray(e)?e.forEach(function(e){t[e]=n}):t[e]=n}function i(t,e){Array.isArray(e)?e.forEach(function(e){t[e]&&delete t[e]}):t[e]&&delete t[e]}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(3),c=a(o);t.exports=function(){function t(){var e=this;r(this,t),c.default.subscribe_listener_events_to_broadcast.forEach(function(t){var n="_".concat(t);e[n]={},e[t]=function(t,e){s(this[n],t,e)}})}return u(t,[{key:"emit",value:function(t,e,n){var a="_".concat(t);this[a]&&this[a][e]&&this[a][e].call(null,n)}},{key:"error",value:function(t){this._error=t}},{key:"emitError",value:function(t){this._error&&this._error.call(null,t)}},{key:"unsubscribe",value:function(t){var e=this;c.default.subscribe_listener_events_to_broadcast.forEach(function(n){var a="_".concat(n);i(e[a],t)})}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();t.exports=function(){function t(){n(this,t),this.channels={}}return a(t,[{key:"push",value:function(t,e){this.channels[t]&&this.channels[t].push(e)}},{key:"get",value:function(t){return this.channels[t]?this.channels[t]:null}},{key:"clean",value:function(t){this.channels[t]&&(this.channels[t].length=0)}},{key:"subscribe",value:function(t){this.channels[t]||(this.channels[t]=[])}},{key:"sort",value:function(t,e){this.channels[t]&&this.channels[t].sort(function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0})}},{key:"unsubscribe",value:function(t){this.channels[t]&&(this.clean(t),delete this.channels[t])}}]),t}()},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(3),u=a(i);t.exports=function(){function t(){r(this,t),this.count={},this.instance=void 0}return s(t,[{key:"initialize",value:function(t){this.instance=t}},{key:"enableLoad",value:function(t){var e=this;t.autoload&&"number"==typeof t.autoload&&(this.count[t.channels]=t.autoload,t.channels.forEach(function(n){e.count[n]=t.autoload}))}},{key:"getHistory",value:function(t,e){var n=this;this.count[t]&&!function(){var a=n.instance,r=Array.isArray(t)?t:[t],s=r.length;r.forEach(function(r){a.history({channel:r,count:n.count[t]}).then(function(n){n.messages.forEach(function(e){e.message=e.entry,e.channel=r,a.outputOn.push(t,e)}),s-=1,e&&0===s&&(a.outputOn.sort(t,u.default.history_sort_attribute),e())}).catch(function(){})})}()}},{key:"disableLoad",value:function(t){var e=this;Array.isArray(t.channels)?t.channels.forEach(function(t){e.count[t]&&delete e.count[t]}):this.count[t.channels]&&delete this.count[t.channels]}}]),t}()}]);