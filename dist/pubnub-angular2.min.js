!function(t){function n(a){if(e[a])return e[a].exports;var r=e[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";e(1),e(2)},function(t,n){"use strict";"function"!=typeof Object.create&&(Object.create=function(){var t=function(){};return function(n){if(arguments.length>1)throw new Error("Second argument not supported");if(n!==Object(n)&&null!==n)throw new TypeError("Argument must be an object or null");if(null===n)throw Error("null [[Prototype]] not supported");t.prototype=n;var e=new t;return t.prototype=null,e}}())},function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=e(3),s=a(r),i=e(4),u=a(i);!function(){window.PubNubAngular=ng.core.Class({constructor:function(){if("undefined"==typeof PubNub||null===PubNub)throw new Error("PubNub is not in global scope. Ensure that pubnub.js v4 library is included before the angular adapter");this.wrappers={}},init:function(t){var n=this.getInstance(s.default.default_instance_name);return n.init(t),n},getInstance:function(t){var n=this,e=this.wrappers[t];return e&&e instanceof u.default?e:"string"==typeof t&&t.length>0?(this.wrappers[t]=new u.default(t,this),s.default.attributes_to_delegate.forEach(function(e){n.wrappers[t].wrapAttribute(e),n[e]||Object.defineProperty(n,e,{get:function(){return this.getInstance(s.default.default_instance_name)[e]}})}),s.default.methods_to_delegate.forEach(function(e){n.wrappers[t].wrapMethod(e),n[e]||(n[e]=function(t){return this.getInstance(s.default.default_instance_name)[e](t)})}),this.wrappers[t]):e},subscribe:function(t){this.getInstance(s.default.default_instance_name).subscribe(t)},unsubscribe:function(t){this.getInstance(s.default.default_instance_name).unsubscribe(t)},getMessage:function(t,n){return this.getInstance(s.default.default_instance_name).getMessage(t,n)},getPresence:function(t,n){this.getInstance(s.default.default_instance_name).getPresence(t,n)},getStatus:function(t,n){this.getInstance(s.default.default_instance_name).getStatus(t,n)},getError:function(t){this.getInstance(s.default.default_instance_name).getError(t)},clean:function(t){this.getInstance(s.default.default_instance_name).clean(t)}})}()},function(t,n){t.exports={pubnub_prefix:"pubnub",default_instance_name:"default",attributes_to_delegate:["channelGroups","push"],methods_to_delegate:["addListener","removeListener","removeAllListeners","hereNow","whereNow","getState","setState","grant","audit","publish","fire","history","time","reconnect","stop","unsubscribeAll","getSubscribedChannels","getSubscribedChannelGroups","encrypt","decrypt","getAuthKey","setAuthKey","setCipherKey","getUUID","setUUID","getFilterExpression","setFilterExpression"],common_callbacks_to_wrap:["callback","error"],subscribe_listener_events_to_broadcast:["message","presence","status"]}},function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,e,a){return e&&t(n.prototype,e),a&&t(n,a),n}}(),i=e(5),u=a(i),o=e(6),c=a(o),l=e(7),h=a(l),f=e(8),d=a(f);t.exports=function(){function t(n){r(this,t),this.label=n,this.pubnubInstance=null,this.broadcastOn=new c.default,this.outputOn=new h.default,this.mockingInstance=new u.default(this.broadcastOn),this.autoload=new d.default}return s(t,[{key:"init",value:function(t){this.pubnubInstance=new PubNub(t),this.mockingInstance.initializeListener(this),this.autoload.initialize(this)}},{key:"getLabel",value:function(){return this.label}},{key:"subscribe",value:function(t){this.getOriginalInstance().subscribe(t),this.mockingInstance.enableEventsBroadcast(t),this.autoload.enableLoad(t)}},{key:"unsubscribe",value:function(t){this.getOriginalInstance().unsubscribe(t),this.mockingInstance.disableEventsBroadcast(t),this.autoload.disableLoad(t),this.outputOn.unsubscribe(t)}},{key:"getMessage",value:function(t,n){var e=this;return this.outputOn.subscribe(t),this.autoload.getHistory(t,n),n&&this.broadcastOn.message(t,function(a){e.outputOn.push(t,a),n(a)}),this.outputOn.get(t)}},{key:"getPresence",value:function(t,n){this.broadcastOn&&this.broadcastOn.presence(t,n)}},{key:"getStatus",value:function(t,n){this.broadcastOn&&this.broadcastOn.status(t,n)}},{key:"getError",value:function(t){this.broadcastOn&&this.broadcastOn.error(t)}},{key:"clean",value:function(t){this.outputOn.clean(t)}},{key:"getOriginalInstance",value:function(){if(this.pubnubInstance)return this.pubnubInstance;throw new ReferenceError("Pubnub default instance is not initialized yet. Invoke #init() method first.")}},{key:"wrapAttribute",value:function(t){Object.defineProperty(this,t,{get:function(){return this.getOriginalInstance()[t]}})}},{key:"wrapMethod",value:function(t){this[t]=function(n){return this.getOriginalInstance()[t](n)}}}]),t}()},function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,e,a){return e&&t(n.prototype,e),a&&t(n,a),n}}(),i=e(3),u=a(i);t.exports=function(){function t(n){r(this,t),this.listener=null,this.broadcaster=n,this.broadcastChannels={}}return s(t,[{key:"initializeListener",value:function(t){var n=this;null===this.listener&&!function(){var e=n;e.listener={},u.default.subscribe_listener_events_to_broadcast.forEach(function(t){e.listener[t]=function(n){n.subscription&&e.broadcastChannels[n.subscription]&&e.broadcastChannels[n.subscription].includes(t)&&(e.broadcaster.emit(t,n.subscription,n),n.channel&&e.broadcaster.emit(t,n.channel,n)),n.channel&&e.broadcastChannels[n.channel]&&e.broadcastChannels[n.channel].includes(t)&&e.broadcaster.emit(t,n.channel,n),"status"===t&&(n.error?e.broadcaster.emitError(n):(n.affectedChannels.forEach(function(a){e.broadcastChannels[a]&&e.broadcastChannels[a].includes(t)&&e.broadcaster.emit(t,a,n)}),n.affectedChannelGroups.forEach(function(a){e.broadcastChannels[a]&&e.broadcastChannels[a].includes(t)&&e.broadcaster.emit(t,a,n)})))}}),t.getOriginalInstance().addListener(n.listener)}()}},{key:"addEventsBroadcast",value:function(t,n){var e=this;t.forEach(function(t){"boolean"==typeof n?e.broadcastChannels[t]=u.default.subscribe_listener_events_to_broadcast:Array.isArray(n)&&(e.broadcastChannels[t]=[],n.forEach(function(n){u.default.subscribe_listener_events_to_broadcast.includes(n)&&e.broadcastChannels[t].push(n)}))})}},{key:"removeEventBroadcast",value:function(t){var n=this;t.forEach(function(t){n.broadcastChannels[t]&&delete n.broadcastChannels[t]})}},{key:"enableEventsBroadcast",value:function(t){t.channels&&this.addEventsBroadcast(t.channels,t.triggerEvents),t.channelGroups&&this.addEventsBroadcast(t.channelGroups,t.triggerEvents)}},{key:"disableEventsBroadcast",value:function(t){t.channels&&this.removeEventBroadcast(t.channels),t.channelGroups&&this.removeEventBroadcast(t.channelGroups)}}]),t}()},function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function s(t,n,e){Array.isArray(n)?n.forEach(function(n){t[n]=e}):t[n]=e}function i(t,n){Array.isArray(n)?n.forEach(function(n){t[n]&&delete t[n]}):t[n]&&delete t[n]}var u=function(){function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,e,a){return e&&t(n.prototype,e),a&&t(n,a),n}}(),o=e(3),c=a(o);t.exports=function(){function t(){var n=this;r(this,t),c.default.subscribe_listener_events_to_broadcast.forEach(function(t){var e="_".concat(t);n[e]={},n[t]=function(t,n){s(this[e],t,n)}})}return u(t,[{key:"emit",value:function(t,n,e){var a="_".concat(t);this[a]&&this[a][n]&&this[a][n].call(null,e)}},{key:"error",value:function(t){this._error=t}},{key:"emitError",value:function(t){this._error&&this._error.call(null,t)}},{key:"unsubscribe",value:function(t){var n=this;c.default.subscribe_listener_events_to_broadcast.forEach(function(e){var a="_".concat(e);i(n[a],t)})}}]),t}()},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,e,a){return e&&t(n.prototype,e),a&&t(n,a),n}}();t.exports=function(){function t(){e(this,t),this.channels={},this.multiChannels={}}return a(t,[{key:"push",value:function(t,n){var e=this;Array.isArray(t)?t.forEach(function(t){e.channels[t]&&e.channels[t].push(n)}):this.channels[t]&&this.channels[t].push(n);var a=!0,r=!1,s=void 0;try{for(var i,u=Object.keys(this.multiChannels)[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var o=i.value;if(o.includes(t)){this.multiChannels[o].push(n);break}}}catch(t){r=!0,s=t}finally{try{!a&&u.return&&u.return()}finally{if(r)throw s}}}},{key:"get",value:function(t){return Array.isArray(t)?this.multiChannels[t]:this.channels[t]}},{key:"clean",value:function(t){var n=this;Array.isArray(t)?(t.forEach(function(t){n.channels[t]&&(n.channels[t].length=0)}),this.multiChannels[t]&&(this.multiChannels[t].length=0)):this.channels[t]&&(this.channels[t].length=0)}},{key:"subscribe",value:function(t){Array.isArray(t)?this.multiChannels[t]||(this.multiChannels[t]=[]):this.channels[t]||(this.channels[t]=[])}},{key:"unsubscribe",value:function(t){this.clean(t),Array.isArray(t)?this.multiChannels[t]&&delete this.multiChannels[t]:this.channels[t]||delete this.channels[t]}}]),t}()},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(n,e,a){return e&&t(n.prototype,e),a&&t(n,a),n}}();t.exports=function(){function t(){e(this,t),this.count={},this.instance=void 0}return a(t,[{key:"initialize",value:function(t){this.instance=t}},{key:"enableLoad",value:function(t){var n=this;t.autoload&&"number"==typeof t.autoload&&(this.count[t.channels]=t.autoload,t.channels.forEach(function(e){n.count[e]=t.autoload}))}},{key:"getHistory",value:function(t,n){var e=this;this.count[t]&&!function(){var a=e.instance,r=Array.isArray(t)?t:[t],s=r.length;r.forEach(function(r){a.history({channel:r,count:e.count[t]}).then(function(e){e.messages.forEach(function(n){n.message=n.entry,n.channel=r,a.outputOn.push(t,n)}),n&&0===--s&&n()}).catch(function(t){})})}()}},{key:"disableLoad",value:function(t){var n=this;Array.isArray(t.channels)?t.channels.forEach(function(t){delete n.count[t]}):delete this.count[t.channels]}}]),t}()}]);